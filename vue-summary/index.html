<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue summary | Wheels</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/vue-wheels/assets/css/0.styles.6849614e.css" as="style"><link rel="preload" href="/vue-wheels/assets/js/app.7e8314ac.js" as="script"><link rel="preload" href="/vue-wheels/assets/js/7.54f4d56b.js" as="script"><link rel="preload" href="/vue-wheels/assets/js/76.9f03b7d3.js" as="script"><link rel="prefetch" href="/vue-wheels/assets/js/1.78dae59c.js"><link rel="prefetch" href="/vue-wheels/assets/js/10.80e4fc4a.js"><link rel="prefetch" href="/vue-wheels/assets/js/11.d1e1cf18.js"><link rel="prefetch" href="/vue-wheels/assets/js/12.c57be36e.js"><link rel="prefetch" href="/vue-wheels/assets/js/13.c270a39e.js"><link rel="prefetch" href="/vue-wheels/assets/js/14.f6c76568.js"><link rel="prefetch" href="/vue-wheels/assets/js/15.831eec5a.js"><link rel="prefetch" href="/vue-wheels/assets/js/16.faace195.js"><link rel="prefetch" href="/vue-wheels/assets/js/17.1b14edf8.js"><link rel="prefetch" href="/vue-wheels/assets/js/18.a4516732.js"><link rel="prefetch" href="/vue-wheels/assets/js/19.a642101d.js"><link rel="prefetch" href="/vue-wheels/assets/js/2.426ec039.js"><link rel="prefetch" href="/vue-wheels/assets/js/20.48c2f197.js"><link rel="prefetch" href="/vue-wheels/assets/js/21.a5ee3c52.js"><link rel="prefetch" href="/vue-wheels/assets/js/22.658b0efc.js"><link rel="prefetch" href="/vue-wheels/assets/js/23.a06ae67a.js"><link rel="prefetch" href="/vue-wheels/assets/js/24.30765c3b.js"><link rel="prefetch" href="/vue-wheels/assets/js/25.537dc645.js"><link rel="prefetch" href="/vue-wheels/assets/js/26.56264577.js"><link rel="prefetch" href="/vue-wheels/assets/js/27.410179fe.js"><link rel="prefetch" href="/vue-wheels/assets/js/28.9ec0d8ee.js"><link rel="prefetch" href="/vue-wheels/assets/js/29.d735d530.js"><link rel="prefetch" href="/vue-wheels/assets/js/3.fe496533.js"><link rel="prefetch" href="/vue-wheels/assets/js/30.c14f3a6b.js"><link rel="prefetch" href="/vue-wheels/assets/js/31.dd9ec3c3.js"><link rel="prefetch" href="/vue-wheels/assets/js/32.b6d5b075.js"><link rel="prefetch" href="/vue-wheels/assets/js/33.d44244db.js"><link rel="prefetch" href="/vue-wheels/assets/js/34.513c479c.js"><link rel="prefetch" href="/vue-wheels/assets/js/35.a9e4fd38.js"><link rel="prefetch" href="/vue-wheels/assets/js/36.f6417fdd.js"><link rel="prefetch" href="/vue-wheels/assets/js/37.26ee6ddc.js"><link rel="prefetch" href="/vue-wheels/assets/js/38.ed7cc5f1.js"><link rel="prefetch" href="/vue-wheels/assets/js/39.ee96c6df.js"><link rel="prefetch" href="/vue-wheels/assets/js/4.62139a42.js"><link rel="prefetch" href="/vue-wheels/assets/js/40.0b03d06b.js"><link rel="prefetch" href="/vue-wheels/assets/js/41.b6919e69.js"><link rel="prefetch" href="/vue-wheels/assets/js/42.1abe7296.js"><link rel="prefetch" href="/vue-wheels/assets/js/43.6752f3dc.js"><link rel="prefetch" href="/vue-wheels/assets/js/44.4285a888.js"><link rel="prefetch" href="/vue-wheels/assets/js/45.3d78bd1c.js"><link rel="prefetch" href="/vue-wheels/assets/js/46.9be3fb69.js"><link rel="prefetch" href="/vue-wheels/assets/js/47.9a0cae0b.js"><link rel="prefetch" href="/vue-wheels/assets/js/48.5ad7c27e.js"><link rel="prefetch" href="/vue-wheels/assets/js/49.354a07dc.js"><link rel="prefetch" href="/vue-wheels/assets/js/5.c3a2bdd8.js"><link rel="prefetch" href="/vue-wheels/assets/js/50.e53bdb9a.js"><link rel="prefetch" href="/vue-wheels/assets/js/51.58585ff4.js"><link rel="prefetch" href="/vue-wheels/assets/js/52.d61dcb83.js"><link rel="prefetch" href="/vue-wheels/assets/js/53.d0902a58.js"><link rel="prefetch" href="/vue-wheels/assets/js/54.9f22def6.js"><link rel="prefetch" href="/vue-wheels/assets/js/55.89beefa7.js"><link rel="prefetch" href="/vue-wheels/assets/js/56.9ead74e5.js"><link rel="prefetch" href="/vue-wheels/assets/js/57.5d0a0e17.js"><link rel="prefetch" href="/vue-wheels/assets/js/58.dce23783.js"><link rel="prefetch" href="/vue-wheels/assets/js/59.b5961f64.js"><link rel="prefetch" href="/vue-wheels/assets/js/60.e07afb56.js"><link rel="prefetch" href="/vue-wheels/assets/js/61.36450e88.js"><link rel="prefetch" href="/vue-wheels/assets/js/62.437a2911.js"><link rel="prefetch" href="/vue-wheels/assets/js/63.da5fe7fa.js"><link rel="prefetch" href="/vue-wheels/assets/js/64.3263020f.js"><link rel="prefetch" href="/vue-wheels/assets/js/65.9d1808de.js"><link rel="prefetch" href="/vue-wheels/assets/js/66.6e7d922e.js"><link rel="prefetch" href="/vue-wheels/assets/js/67.6898df2b.js"><link rel="prefetch" href="/vue-wheels/assets/js/68.0672b5ed.js"><link rel="prefetch" href="/vue-wheels/assets/js/69.3d59386a.js"><link rel="prefetch" href="/vue-wheels/assets/js/70.c470df09.js"><link rel="prefetch" href="/vue-wheels/assets/js/71.1fffba1e.js"><link rel="prefetch" href="/vue-wheels/assets/js/72.1ea020f1.js"><link rel="prefetch" href="/vue-wheels/assets/js/73.4b622a7a.js"><link rel="prefetch" href="/vue-wheels/assets/js/74.f70fae80.js"><link rel="prefetch" href="/vue-wheels/assets/js/75.ad2d867a.js"><link rel="prefetch" href="/vue-wheels/assets/js/77.d80b4c1f.js"><link rel="prefetch" href="/vue-wheels/assets/js/78.a3d5ee8e.js"><link rel="prefetch" href="/vue-wheels/assets/js/79.927d282b.js"><link rel="prefetch" href="/vue-wheels/assets/js/8.4c03ba94.js"><link rel="prefetch" href="/vue-wheels/assets/js/80.bb2cee55.js"><link rel="prefetch" href="/vue-wheels/assets/js/81.1424a4a3.js"><link rel="prefetch" href="/vue-wheels/assets/js/9.bc4c087b.js">
    <link rel="stylesheet" href="/vue-wheels/assets/css/0.styles.6849614e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-wheels/" class="home-link router-link-active"><!----> <span class="site-name">Wheels</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>入门</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-wheels/install/" class="sidebar-link">安装</a></li><li><a href="/vue-wheels/get-started/" class="sidebar-link">使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>组件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-wheels/components/button.html" class="sidebar-link">Button-按钮</a></li><li><a href="/vue-wheels/components/input.html" class="sidebar-link">Input-输入框</a></li><li><a href="/vue-wheels/components/grid.html" class="sidebar-link">Grid-网格</a></li><li><a href="/vue-wheels/components/layout.html" class="sidebar-link">Layout-布局</a></li><li><a href="/vue-wheels/components/toast.html" class="sidebar-link">Toast-提示</a></li><li><a href="/vue-wheels/components/tabs.html" class="sidebar-link">Tabs-标签</a></li><li><a href="/vue-wheels/components/cascader.html" class="sidebar-link">Cascader-级联选择器</a></li><li><a href="/vue-wheels/components/collapse.html" class="sidebar-link">Collapse-折叠面板</a></li><li><a href="/vue-wheels/components/popover.html" class="sidebar-link">Popover-弹出层</a></li><li><a href="/vue-wheels/components/slides.html" class="sidebar-link">Slides-轮播</a></li><li><a href="/vue-wheels/components/nav.html" class="sidebar-link">Nav-导航栏</a></li><li><a href="/vue-wheels/components/pager.html" class="sidebar-link">Pager-分页器</a></li><li><a href="/vue-wheels/components/validator.html" class="sidebar-link">Validator-表单验证</a></li><li><a href="/vue-wheels/components/table.html" class="sidebar-link">Table-表格</a></li><li><a href="/vue-wheels/components/sticky.html" class="sidebar-link">Sticky-粘滞</a></li><li><a href="/vue-wheels/components/uploader.html" class="sidebar-link">Uploader-图片上传</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>总结</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-wheels/%E7%BB%84%E4%BB%B6%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90/" class="sidebar-link">组件需求分析</a></li><li><a href="/vue-wheels/API%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" class="sidebar-link">API设计原则</a></li><li><a href="/vue-wheels/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%80%BB%E7%BB%93/" class="sidebar-link">单元测试总结</a></li><li><a href="/vue-wheels/vue-cli/" class="sidebar-link">vue cli</a></li><li><a href="/vue-wheels/vue-summary/" class="active sidebar-link">vue summary</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#data" class="sidebar-link">data</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#props" class="sidebar-link">props</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#computed" class="sidebar-link">computed</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#watch" class="sidebar-link">watch</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#slots" class="sidebar-link">slots</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#修饰符" class="sidebar-link">修饰符</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#父子组件" class="sidebar-link">父子组件</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#事件" class="sidebar-link">事件</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#异步" class="sidebar-link">异步</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#依赖注入" class="sidebar-link">依赖注入</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#生命周期" class="sidebar-link">生命周期</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#v-for" class="sidebar-link">v-for</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#插件" class="sidebar-link">插件</a></li><li class="sidebar-sub-header"><a href="/vue-wheels/vue-summary/#指令" class="sidebar-link">指令</a></li></ul></li><li><a href="/vue-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/" class="sidebar-link">开发流程</a></li><li><a href="/vue-wheels/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/" class="sidebar-link">开发规范</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-summary"><a href="#vue-summary" aria-hidden="true" class="header-anchor">#</a> vue summary</h1> <h2 id="data"><a href="#data" aria-hidden="true" class="header-anchor">#</a> data</h2> <blockquote><p>data 里面放组件自身能维护的数据。比如 popover 是否可见</p></blockquote> <h2 id="props"><a href="#props" aria-hidden="true" class="header-anchor">#</a> props</h2> <ol><li>props 里面放由父组件传回的数据。比如 dataSource 等用户数据，以及组件属性（name,width,height...）</li> <li>props 里面的数据不许修改，要更新只能通过 $emit 触发，.sync等方式通知父组件处理</li> <li>一个组件的 props 必须正交</li> <li>props 不能以 data-　开头</li></ol> <h2 id="computed"><a href="#computed" aria-hidden="true" class="header-anchor">#</a> computed</h2> <ol><li>如果某个值的产生需要用到 data/props，我们就把这个值放入 computed 中</li></ol> <div class="language- extra-class"><pre class="language-text"><code>// data1,prop2...变化后，将重新触发 fn,实现对 generatedValue 的更新
computed: {
    generatedValue: function () {
        return fn(data1,prop2...)
    }
}
</code></pre></div><ol start="2"><li>一般用于Class绑定或Style绑定</li></ol> <div class="language- extra-class"><pre class="language-text"><code>// Class绑定
computed: {
    toastClasses: function () {
        return [`position-${this.position}`]
    }
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// Style绑定
computed: {
    colStyle() {
        return {
            paddingLeft: this.gutter / 2 + 'px',
            paddingRight: this.gutter / 2 + 'px'
        }
    }
}
</code></pre></div><h2 id="watch"><a href="#watch" aria-hidden="true" class="header-anchor">#</a> watch</h2> <ol><li>watch 就是定向版的 update()，一旦某个 data/props 发生变化，就立即执行相应操作</li></ol> <div class="language- extra-class"><pre class="language-text"><code>// selectedItems可以是data，也可以是props（由父组件传回）
watch:{
    selectedItems(){
        if(selectedItems.length&lt;10){
            console.log(长度小于10)
        }
    }
}
</code></pre></div><p>等价于</p> <div class="language- extra-class"><pre class="language-text"><code>updated(){
    if(this.selectedItems.length&lt;10){
        console.log(长度小于10)
    }
}
</code></pre></div><ol start="2"><li>watch 与 computed 的区别</li></ol> <blockquote><p>computed 的作用是维护一个基于 data/props 的值，而 watch 是善后，是保证某个 data/prop 变化后相应操作能立即跟上。</p></blockquote> <h2 id="slots"><a href="#slots" aria-hidden="true" class="header-anchor">#</a> slots</h2> <ol><li>$slots 要放在 $mount() 之前</li> <li>如何向组件的slot中插入HTML内容？
<ul><li>这是一种危险的行为（阻止事件冒泡也是一种危险的行为）</li> <li>实现方法</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;div v-html=&quot;$slots.default[0]&quot;&gt;&lt;/div&gt;

vm.$slots.default=['这是&lt;strong style=&quot;color: blue&quot;&gt;toast&lt;/strong&gt;信息']
</code></pre></div></li> <li>slot-scope
<ul><li>传递属性</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template slot=&quot;content&quot; slot-scope=&quot;{close}&quot;&gt;
    &lt;g-button  v-on:click.native=&quot;close&quot;&gt;关闭&lt;/g-button&gt;
&lt;/template&gt;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;slot name=&quot;content&quot;　:close=&quot;closeContent&quot;&gt;&lt;/slot&gt;

methods: {
    closeContent(){
        ...
    }
}
</code></pre></div></li></ol> <ul><li>传递对象<div class="language- extra-class"><pre class="language-text"><code>&lt;td&gt;
    &lt;slot name=&quot;content&quot; :xxx=&quot;item&quot;&gt;&lt;/slot&gt;
&lt;/td&gt;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;template slot=&quot;content&quot; slot-scope=&quot;{xxx}&quot;&gt;
    {{xxx.name}}
&lt;/template&gt;
</code></pre></div></li> <li>slots 外部一般用一个标签包裹起来</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
    ...
    &lt;div class=&quot;wrapper&quot;&gt;
        &lt;slots&gt;&lt;slots&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre></div><h2 id="修饰符"><a href="#修饰符" aria-hidden="true" class="header-anchor">#</a> 修饰符</h2> <h4 id="sync"><a href="#sync" aria-hidden="true" class="header-anchor">#</a> <a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6" target="_blank" rel="noopener noreferrer">.sync<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>对于</p> <div class="language- extra-class"><pre class="language-text"><code>this.$emit('update:title', newTitle)
</code></pre></div><p>下面两种写法等价</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;text-document :doc.title = $event @update:title=&quot;doc.title = $event&quot;&gt;&lt;/text-document&gt;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;text-document :title.sync=&quot;doc.title&quot;&gt;&lt;/text-document&gt;
</code></pre></div><p>也就是说sync的作用是让 title=&quot;doc.title&quot; 异步执行多次（响应式）</p> <h4 id="native"><a href="#native" aria-hidden="true" class="header-anchor">#</a> <a href="https://cn.vuejs.org/v2/guide/components-custom-events.html#%E5%B0%86%E5%8E%9F%E7%94%9F%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E5%88%B0%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">.native<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <blockquote><p>原生的事件是无法直接添加到组件上的,想要在组件上加原生的DOM事件，必须使用native修饰符</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;g-button  v-on:click.native=&quot;close&quot;&gt;close&lt;/g-button&gt;&lt;/div&gt;
</code></pre></div><p>除了原生的DOM事件，还可能通过$emit触发组件上的事件</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;g-button @beEmited=&quot;xxx&quot;&gt;
</code></pre></div><p>beEmited事件是g-button内部的元素点击事件通过emit触发的</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
    &lt;button @click=&quot;$emit('beEmited')&quot;&gt;&lt;/button&gt;
&lt;/template&gt;
</code></pre></div><h2 id="父子组件"><a href="#父子组件" aria-hidden="true" class="header-anchor">#</a> 父子组件</h2> <h4 id="父子组件-created-和-mounted-顺序"><a href="#父子组件-created-和-mounted-顺序" aria-hidden="true" class="header-anchor">#</a> 父子组件 created 和 mounted 顺序</h4> <div class="language- extra-class"><pre class="language-text"><code>father.created
children.created
children.mounted
father.mounted
</code></pre></div><h4 id="父子组件通信"><a href="#父子组件通信" aria-hidden="true" class="header-anchor">#</a> 父子组件通信</h4> <ul><li>父组件给子组件传递 props</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;g-collapse :single=&quot;true&quot;&gt;
    &lt;g-collapse-item title=&quot;标题1&quot; name=&quot;1&quot;&gt;内容1&lt;/g-collapse-item&gt;
    &lt;g-collapse-item title=&quot;标题2&quot; name=&quot;2&quot;&gt;内容2&lt;/g-collapse-item&gt;
    &lt;g-collapse-item title=&quot;标题3&quot; name=&quot;3&quot;&gt;内容3&lt;/g-collapse-item&gt;
&lt;/g-collapse&gt;
</code></pre></div><ul><li>父组件根据子组件情况修改父组件 data</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mounted() {
    this.$children.forEach((vm) =&gt; {
        if (vm.$options.name === 'WheelSider') {
            this.hasSider = true
        }
    })
}
</code></pre></div><ul><li>父组件挑选符合条件的子组件,修改子组件 data</li></ul> <div class="language- extra-class"><pre class="language-text"><code>mounted() {

    // 把父组件的 gutter 传递给子组件
    this.$children.forEach((vm) =&gt; {
        vm.gutter = this.gutter
    })
}
</code></pre></div><ul><li>父组件与符合条件的子组件通信</li></ul> <div class="language- extra-class"><pre class="language-text"><code>this.$children.forEach((vm)=&gt;{
    if(vm.$options.name===&quot;WheelTabsHead&quot;){
        vm.$children.forEach((childVm)=&gt;{
            if(childVm.$options.name==&quot;WheelTabsItem&quot;&amp;&amp;childVm.name==this.selected){
                this.eventBus&amp;&amp;this.eventBus.$emit('update:selected', this.selected,childVm)
            }
        })
    }
})
</code></pre></div><blockquote><p>注意,由于父子组件挂载顺序的原因,所以在父组件的mounted中进行父子通信是最合适的</p></blockquote> <h2 id="事件"><a href="#事件" aria-hidden="true" class="header-anchor">#</a> 事件</h2> <h4 id="emit"><a href="#emit" aria-hidden="true" class="header-anchor">#</a> $emit</h4> <ol><li>$emit和$on必须作用在同一实例上</li></ol> <blockquote><p>父组件 A 通过 props 的方式向子组件 B 传递，B to A 通过在 B 组件中 $emit, A 组件中 v-on 的方式实现。</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// A.vue
&lt;template&gt;
    &lt;div&gt;
        &lt;B @travel=&quot;callback&quot;&gt;&lt;/B&gt;
        ......
    &lt;/div&gt;
&lt;/template&gt;


// B.vue
&lt;template&gt;
    &lt;div @click=&quot;emit&quot;&gt;
    ......
    &lt;/div&gt;
&lt;/template&gt;

methods:{
    emit(){
        this.$emit('travel')
    }
}
</code></pre></div><ol start="2"><li>$emit是不冒泡的</li> <li>$emit 实现孙子组件向爷爷组件通信</li></ol> <blockquote><p>前提：不考虑 eventBus</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;grandPa @fatherSay=&quot;console.log('ok,grandPa konw it')&quot;&gt;
    &lt;father @childSay=&quot;this.$emit('fatherSay')&quot;&gt;
        &lt;child&gt;&lt;/child&gt;
    &lt;/father&gt;
&lt;/grandPa&gt;

</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// child.vue
this.$emit('childSay')
</code></pre></div><h4 id="event"><a href="#event" aria-hidden="true" class="header-anchor">#</a> $event</h4> <ul><li>对于原生元素（如 button、input）来说，$event 是原始的 DOM 事件</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;input type=&quot;checkbox&quot;  @change=changeStatus($event,item)&gt;

changeStatus(event,item){

}
</code></pre></div><blockquote><p>如果回调函数只有 event 一个参数，那么 $event 可以省略</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>&lt;input type=&quot;checkbox&quot;  @change=changeStatus&gt;

changeStatus(event){

}
</code></pre></div><ul><li>对于自定义组件（如 child）来说，$event 是其自身 $emit 发出的第二个参数</li></ul> <div class="language- extra-class"><pre class="language-text"><code>    &lt;div id=&quot;app&quot;&gt;
        &lt;child @click=&quot;clickChild(a,$event)&quot;&gt;&lt;/child&gt;
    &lt;/div&gt;

    Vue.component('child', {
        data: function () {
            return {}
        },
        template: '&lt;button @click=&quot;clickButton&quot;&gt;点我&lt;/button&gt;',
        methods: {
            clickButton() {
                this.$emit('click', 1,2) // $emit的第二个参数为$event
            }
        }
    })

    var example1 = new Vue({
        el: '#app',
        data: {
        },
        methods: {
            clickChild(e) {
                console.log(e); // 1，说明$event值为1
            }
        }
    })
</code></pre></div><h4 id="eventbus"><a href="#eventbus" aria-hidden="true" class="header-anchor">#</a> eventBus</h4> <blockquote><p>eventBus 与 $on(),$emit() 同属于发布订阅模式，不同于后者需要依附于某个 vue 实例，eventBus 作为事件中心，独立于各个组件。因此可以利用它实现多组件间通信</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>this.eventBus&amp;&amp;this.eventBus.$emit() // 发布

this.eventBus&amp;&amp;this.eventBus.$on() // 订阅

this.eventBus.$off() // 取消订阅
</code></pre></div><h2 id="异步"><a href="#异步" aria-hidden="true" class="header-anchor">#</a> 异步</h2> <p>对于</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;g-uploader :fileList.sync=&quot;fileList&quot;&gt;{{}}&lt;/g-uploader&gt;

data(){
    fileList:[]
}
</code></pre></div><p>在 uploader 组件中更新 fileList 后，是无法直接获取最新的 fileList</p> <div class="language- extra-class"><pre class="language-text"><code>props:{
    fileList:{
        type:Array
    }
}
let arr=[{name:'libai'}]
this.$emit('update:fileList',arr)
console.log(this.fileList) // []
</code></pre></div><p>这是因为父组件获取到更新后的 fileList 是同步的（即sync是同步的），而父组件将更新后的 fileList 传回给子组件是异步的（即vue 的 render 是同步的）</p> <div class="language- extra-class"><pre class="language-text"><code>let arr=[{name:'libai'}]
this.$emit('update:fileList',arr)
setTimeout(()=&gt;{
    console.log(this.fileList); // [{name:'libai'}]
})
</code></pre></div><h2 id="依赖注入"><a href="#依赖注入" aria-hidden="true" class="header-anchor">#</a> 依赖注入</h2> <div class="language- extra-class"><pre class="language-text"><code>// nav
provide() {
    return {
        root: this
    }
}
methods:{
    addItem(){...}
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>// nav-item
inject:['root'],

this.root.addItem(this) // 调用 nav 的方法
</code></pre></div><h2 id="生命周期"><a href="#生命周期" aria-hidden="true" class="header-anchor">#</a> 生命周期</h2> <ul><li><a href="https://www.jianshu.com/p/b88572d8f80a" target="_blank" rel="noopener noreferrer">测试<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h4 id="created"><a href="#created" aria-hidden="true" class="header-anchor">#</a> created</h4> <blockquote><p>vue实例被创建,可访问到 data/props</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// 类似于
var div=document.createElement('div')
</code></pre></div><h4 id="mounted"><a href="#mounted" aria-hidden="true" class="header-anchor">#</a> mounted</h4> <ol><li>vue实例被挂载到真实的DOM节点,如果要执行DOM操作及CSS有关操作，必须在 mounted 中</li></ol> <div class="language- extra-class"><pre class="language-text"><code>// 类似于
document.body.appendChild(div)
</code></pre></div><ol start="2"><li>只在组件被挂载到DOM元素上时执行一次，data/props的改变不会触发它</li> <li>mounted 和 updated
<ul><li>都会重新渲染组件</li> <li>第一次打开页面/手动刷新页面，会触发 mounted，点击按钮改变组件 state ，触发 updated</li> <li>mounted 总是伴随着 updated</li></ul></li></ol> <h4 id="uodated"><a href="#uodated" aria-hidden="true" class="header-anchor">#</a> uodated</h4> <blockquote><p>由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。然而在大多数情况下，你应该避免在此期间更改状态。如果要相应状态改变，通常最好使用计算属性或 watcher 取而代之。</p></blockquote> <h4 id="beforedestroy"><a href="#beforedestroy" aria-hidden="true" class="header-anchor">#</a> beforeDestroy</h4> <blockquote><p>在 beforeDestroy 中销毁注册的事件，创建的元素（防止内存泄漏）</p></blockquote> <h2 id="v-for"><a href="#v-for" aria-hidden="true" class="header-anchor">#</a> v-for</h2> <blockquote><p>v-for 一定要搭配 key=id</p></blockquote> <ul><li><a href="https://jsbin.com/gacokit/8/edit?html,js,output" target="_blank" rel="noopener noreferrer">为什么想删除第一项，结果确实第三项被删除了<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <blockquote><p>可以认为在不加 key 的情况下 vue 是按照索引来判断要删除哪些元素的。
原先的索引</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>0 1 2
</code></pre></div><p>删除第一项，重新生成索引后</p> <div class="language- extra-class"><pre class="language-text"><code>0 1
</code></pre></div><p>vue发现少了最后一项，于是把最后一项删除了，导致了bug</p> <ul><li>一般用 item.id 作为 key（不能:key=index，原因见上）</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;li v-for=&quot;(item,index) in items&quot; :key=item.id&gt;
    &lt;child&gt;
    &lt;/child&gt;
    &lt;button @click=&quot;remove(index)&quot;&gt;删除&lt;/button&gt;
&lt;/li&gt;
</code></pre></div><ul><li>如果是 template 的话,key 要加在实际的DOM元素上</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template v-for=&quot;item,index in dataSource&quot;&gt;
    &lt;tr :key=&quot;item.id&quot;&gt;
    &lt;/tr&gt;
&lt;/template&gt;
</code></pre></div><h2 id="插件"><a href="#插件" aria-hidden="true" class="header-anchor">#</a> 插件</h2> <ul><li>toastPlugin</li></ul> <blockquote><p>用于生成和销毁 toast</p></blockquote> <ul><li>validatorPlugin</li></ul> <blockquote><p>用于表单验证</p></blockquote> <h2 id="指令"><a href="#指令" aria-hidden="true" class="header-anchor">#</a> 指令</h2> <blockquote><p>用于封装DOM操作</p></blockquote> <ul><li>clickOutside</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;div　ref=&quot;cascader&quot; @clickOutside=&quot;close&quot;&gt;&lt;/div&gt;
</code></pre></div><blockquote><p>点击除 cascader 外的其它位置,则关闭 popover,并自动移除对其它位置的监听</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue-wheels/vue-cli/" class="prev">vue cli</a></span> <span class="next"><a href="/vue-wheels/%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B/">开发流程</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vue-wheels/assets/js/app.7e8314ac.js" defer></script><script src="/vue-wheels/assets/js/7.54f4d56b.js" defer></script><script src="/vue-wheels/assets/js/76.9f03b7d3.js" defer></script>
  </body>
</html>
